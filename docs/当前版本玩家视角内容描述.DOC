丧尸危机跑酷（Zombie Lane Survivor）——玩家视角内容描述（当前版本）

1. 我在玩什么？（一句话概括）
这是一款“5 跑道跑酷 + 自动射击”的高速生存游戏：我只需要左右换道来躲障碍、捡道具、对齐目标，角色会自动开火清理丧尸。跑到赛道尽头后会进入 BOSS 战，打赢就进入下一关（下一 Sector）。

2. 核心规则（我作为玩家最先感知到的机制）
2.1 跑道与移动
- 共有 5 条跑道（Lane 1-5），我主要操作就是换道。
- 关卡是“向前推进”的赛道：每关有固定的距离目标，达到尽头后进入 BOSS 战。
- 赛道长度：TRACK_LENGTH = 1000（单位是内部距离标尺）。

2.2 战斗：自动射击 + 对齐输出
- 角色会自动射击，我的输出效率取决于“是否在同一跑道对齐敌人”。
- 弹道/射击表现由武器属性决定（伤害、射速、弹速、散射、连发数）。

2.3 生存：血量、碰撞伤害与治疗
- 初始生命值：100（上限也为 100）。
- 我撞到东西会掉血：
  - 撞到普通丧尸：每次 12 点伤害
  - 撞到障碍物：每次 25 点伤害
- 我捡到医疗包会回复：+30（但不会超过 100）。

2.4 资源：能量（Energy）与技能框架（当前已有基础实现）
- 能量上限：100。
- 能量来源：
  - 击杀丧尸：每次 +3
  - 生存时间：每秒 +1.2
  - 捡到电池类道具：+25
- 技能目前定义了 3 个：dash / shield / aoe（需要解锁后才能使用）。
  - Dash：冷却 10s，持续 1.2s，消耗 32 能量，效果倾向于提升速度（当前速度倍率约 2.1x）。
  - Shield：冷却 12s，持续 4s，消耗 28 能量。
  - AOE：冷却 15s，无持续（瞬发），消耗 50 能量，伤害倍率 2.0x，作用范围（纵向）约 24。

3. 武器与属性（我能拿到哪些枪？各自特点是什么？）
当前版本武器共有 4 种：手枪（默认）、步枪、霰弹枪、加特林。武器的关键属性是：
- damage：每发伤害
- fireRate：射击间隔（毫秒），数值越小射速越快
- bulletSpeed：弹速（影响子弹飞行速度）
- spread：散射角度（越大越“散”）
- burst：每次射击发射的子弹数量

3.1 手枪（Pistol / 默认武器）
- 伤害：10
- 射击间隔：500ms（稳定中速）
- 弹速：2
- 散射：0（很准）
- 连发：1
- 玩家体感：
  - “入门枪”，稳定、好控、适合熟悉换道与对齐。
  - 面对密集丧尸时清怪略慢，需要靠升级或换枪。

3.2 步枪（Assault Rifle）
- 伤害：15
- 射击间隔：200ms（射速明显更快）
- 弹速：3（更跟手）
- 散射：2（轻微扩散）
- 连发：1
- 玩家体感：
  - “泛用最强”类型：远近都舒服，清怪和打 BOSS 都稳。
  - 散射很小，基本不影响对齐输出。

3.3 霰弹枪（Shotgun）
- 伤害：10
- 射击间隔：800ms（射速慢）
- 弹速：2
- 散射：15（扩散很大）
- 连发：5（一次喷 5 发）
- 玩家体感：
  - 贴脸/近距离爆发强，尤其在同跑道压线时能瞬间清理。
  - 缺点是射速慢，错过输出窗口时会“空档明显”。
  - 对 BOSS：如果能稳定对齐，单次爆发高；但容错更低。

3.4 加特林（Minigun）
- 伤害：8
- 射击间隔：50ms（极高射速）
- 弹速：4（很快）
- 散射：5（中等扩散）
- 连发：1
- 玩家体感：
  - “持续火力压制”：几乎一直在泼水，打密集怪很爽。
  - 单发伤害低但 DPS 高，适合叠加伤害类升级。
  - 散射略大，远距离可能浪费弹道，但整体收益仍非常高。

4. 道具与子弹属性（我能捡到哪些提升？）
4.1 武器升级拾取（WEAPON_UPGRADE）
- 直接把当前武器切换为：RIFLE / SHOTGUN / MINIGUN。
- 拾取会加分（+100）。

4.2 子弹升级拾取（BULLET_UPGRADE）
一共有 3 类：
- RATE（射速强化）：fireRateMult + 0.15（等价于射击间隔更短）
- DMG（伤害强化）：damageMult + 0.2
- FIRE（燃烧弹/火焰）：isFire = true（子弹颜色变化；后续可扩展持续伤害等）
- 拾取会加分（+50）。

4.3 其他拾取
- HEAL（医疗包）：生命 +30（上限 100）
- ENERGY（电池）：能量 +25，且加分 +30
- SKILL_UNLOCK（技能芯片）：解锁 dash / shield / aoe 之一（当前通过标签判断），且加分 +75

5. 关卡结构：到底有多少关？
从当前实现看，“关卡（Sector）”不是固定数量：
- 主菜单显示当前 Sector 编号（level）。
- 每次胜利后 level +1，失败则回到 1。
- 因此总关卡数理论上是无限（1…9999 甚至更高），属于“可无限推进”的关卡模式。

每一关的流程固定：
- 跑酷阶段：在 5 跑道上前进，持续刷出丧尸/障碍/道具，直到距离达到 TRACK_LENGTH。
- BOSS 阶段：出现 BOSS（当前名称固定为 “COMMANDER MUTANT”），击败后胜利进入下一关。

6. 难度设置是否合理？（以玩家体验 + 代码数值为依据）
6.1 当前难度如何增长？
难度系数：difficulty = (1.2)^(level - 1)
这意味着：
- 第 1 关 difficulty = 1
- 第 6 关 difficulty ≈ 2.49
- 第 11 关 difficulty ≈ 6.19
- 第 21 关 difficulty ≈ 38.34
（指数增长会在中后段迅速“变硬”。）

6.2 难度具体影响了什么？
- 刷怪频率：刷怪间隔大约是 1100 / difficulty 毫秒
  - 关卡越高，刷得越快，屏幕压力越大。
- BOSS 血量：1500 * difficulty
  - 关卡越高，BOSS 变成“血量海绵”，需要更长输出时间。

6.3 作为玩家的主观评价
- 优点：
  - 前期爬坡清晰：第 1~5 关，刷怪更快、BOSS 更肉，能明显感觉到推进。
  - 指数增长带来“越打越紧张”的节奏，适合街机式挑战。
- 风险：
  - 指数增长很容易在某个关卡后让体验从“挑战”变成“不可解”。原因是：
    - 刷怪密度和 BOSS 血量同时指数膨胀，但玩家成长主要来自随机拾取（武器/子弹升级）。
    - 若某局道具脸差，难度曲线会突然断层。
  - BOSS 血量按 difficulty 线性乘上去，会导致后期战斗时间过长，容错变低、疲劳感变高。

7. 如果要加入“技能 + 角色升级系统”，难度要怎么调才能平衡？
下面给出“我作为玩家希望看到的平衡策略”，并且尽量与当前系统兼容。

7.1 先明确：玩家新增成长后，敌人也必须改成长方式
如果加入角色升级（比如：生命、伤害、射速、移速、暴击、吸血等），玩家强度会从“局内随机提升”变为“局外长期累积 + 局内叠加”。
若敌人仍用 1.2^(level-1) 这种指数增长，常见结果会是：
- 要么前期变得太简单（玩家永久成长碾压）
- 要么后期依旧不可玩（敌人指数碾压），中间平衡窗口很窄

7.2 建议一：把指数增长改成“分段/软上限”的难度曲线
目标：让难度长期上升，但不要爆炸。
- 方案 A（分段指数）：
  - 1~10 关：保持 1.2^(level-1)（建立刺激感）
  - 11~30 关：把底数降低到 1.08~1.12 之间
  - 31+：改为线性或对数增长（例如 difficulty = A + B*log(level)）
- 方案 B（单一公式软上限）：
  - difficulty = 1 + k*(level-1) / (1 + (level-1)/c)
  - 这类函数前期近似线性增长，后期逐渐变缓，方便长期平衡。

7.3 建议二：区分“密度难度”和“数值难度”，避免两者同时爆炸
当前做法同时提升：
- 刷怪更快（密度）
- BOSS 更肉（数值）
建议加入成长系统后改为：
- 以“密度”为主（更有跑酷压迫感），数值增幅为辅。
具体可做：
- 刷怪间隔：1100 / difficulty 继续用，但给最低间隔上限（例如不低于 350ms），避免屏幕堆满。
- BOSS 血量：不再乘 difficulty 全额，可改为：
  - bossHp = 1500 * (0.6 + 0.4*difficulty)（削弱后期膨胀）
  - 或 bossHp = 1500 * sqrt(difficulty)（更温和）

7.4 建议三：技能系统引入后，必须同步调整“掉落/能量/冷却”的三角关系
因为技能能显著抬升容错（Dash/Shield）和清场效率（AOE），需要让技能强度“可控”。建议：
- 能量获取：
  - 保持每秒 +1.2，但击杀 +3 可以随关卡小幅衰减，或给每秒获取设上限（防止后期无限放技能）。
- 技能消耗：
  - AOE 消耗 50 很合理（相对高），可根据角色升级体系决定是否允许降低。
- 冷却与解锁：
  - 若玩家能永久升级冷却，建议把关卡内的能量电池掉率稍降，避免“技能常驻”。

7.5 建议四：角色升级系统的“成长幅度”要围绕关卡时长与失败原因来定
从当前实现看，玩家失败主要来自：
- 撞击高伤害障碍（25）
- 密集怪导致换道不及（叠加 12 的多次碰撞）
因此升级系统建议优先围绕“容错”与“节奏”而不是纯 DPS：
- 生命/护甲：让撞一次障碍不会直接崩盘，但也不能无脑硬吃。
- 换道手感/无敌帧（很短）：让高手能“擦边过”。
- 小幅吸血或击杀回血：配合高密度阶段提升续航，但要限制上限。

7.6 建议五：引入“平衡目标指标”，用数据反推数值
为了保证长期可平衡，建议定义几个目标：
- 目标通关时间：每关跑酷 + BOSS 总时长（例如 60~90 秒）
- 目标受击次数：平均每关允许受击 X 次（例如 2~5 次）
- 目标技能释放次数：每关大招（AOE）大约 1~3 次，Dash/Shield 各 1~4 次（取决于掉落与能量）
然后反推：
- 刷怪间隔下限
- BOSS 血量增长函数
- 能量获取（每秒/每击杀）与技能能耗

8. 总结（我希望版本下一步怎么走）
- 当前版本的爽点在于“对齐射击 + 快速换道 + 拾取成长 + 终点 BOSS”。
- 武器差异明确，霰弹枪/加特林的体感很鲜明。
- 关卡数量本质上是无限推进的 Sector；如果未来加入角色升级与技能强化，建议把难度从纯指数改为“分段/软上限”，并拆分密度与数值两条曲线，避免后期不可玩或前期过于碾压。
